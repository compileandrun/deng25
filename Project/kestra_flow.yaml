id: zip_to_python
namespace: company.team


tasks:
  - id: git_token
    type: io.kestra.plugin.core.log.Log
    message: "{{ kv('GITHUB_ACCESS_TOKEN') }}"
  - id: get_files_from_git
    type: io.kestra.plugin.git.SyncNamespaceFiles
    username: compileandrun
    password: git_token
    url: "https://github.com/compileandrun/deng25/"
    #branch: main
    #namespace: git
    gitDirectory: Project/dlt
    dryRun: false
  - id: print_requirements
    type: io.kestra.plugin.scripts.shell.Commands
    taskRunner:
      type: io.kestra.plugin.core.runner.Process
    namespaceFiles:
      enabled: true
    commands:
      - cat requirements.txt
  - id: binance
    type: io.kestra.plugin.scripts.python.Commands
    warningOnStdErr: false
    taskRunner:
      type: io.kestra.plugin.scripts.runner.docker.Docker
    containerImage: python:3.11-slim
    beforeCommands:
      - pip install --upgrade pip
      - pip install -r requirements.txt > /dev/null
    namespaceFiles:
      enabled: true
#      include:
#        - binance_flow.py
    commands:
      - python binance_flow.py