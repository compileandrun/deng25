
version: 2

models:
    - name: my_first_dbt_model
      description: "A starter dbt model"
      columns:
          - name: id
            description: "The primary key for this table"
            #tests:
            #    - unique
            #    - not_null

    - name: my_second_dbt_model
      description: "A starter dbt model"
      columns:
          - name: id
            description: "The primary key for this table"
            #tests:
            #    - unique
            #    - not_null

    - name: binance
      description: 'Cleaned Binance market data'
      columns:
          - name: a
          - name: p
          - name: q
          - name: f
          - name: l
          - name: T
          - name: m
          - name: M          


sources:
  - name: elegant
    #database: "{{ env_var('DBT_DATABASE', 'stellar-day-445214-e5') }}"
    #schema: "{{ env_var('DBT_SCHEMA', 'sql_database_data') }}"
    database: elegant-karma-454910-u2
    schema: elegant
      # loaded_at_field: record_loaded_at
    tables:
      - name: binance_data
         # freshness:
           # error_after: {count: 6, period: hour}

  - name: elegant
    loader: gcloud storage
    tables:
      - name: binance_ext
        description: 'This is an external table based on all files in the GCS bucket'
        external:
            location: 'gs://elegant-bucket/aggtrade/binance_data/*'
            options: jsonl

        columns:
          - name: _dlt_id
            data_type: string
            #description: "Application ID"
          - name: _dlt_load_id
            data_type: string
            #description: "Application ID"
          - name: m
            data_type: bool
            #description: "Application ID"
          - name: t
            data_type: integer
            #description: "Application ID"
          - name: q
            data_type: float
            #description: "Application ID"
          - name: l
            data_type: integer
            #description: "Application ID"
          - name: p
            data_type: float
            #description: "Application ID"
          - name: f
            data_type: integer
            #description: "Application ID"
          - name: a
            data_type: integer
            #description: "Application ID"